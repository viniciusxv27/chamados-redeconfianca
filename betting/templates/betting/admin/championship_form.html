{% extends 'base.html' %}
{% load static %}

{% block title %}{% if action == 'edit' %}Editar{% else %}Criar{% endif %} Campeonato - Confian√ßa BET{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900">
    <!-- Header -->
    <div class="bg-gradient-to-r from-yellow-600 to-orange-600 shadow-lg">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center space-x-3">
                <a href="{% url 'betting:admin_dashboard' %}" class="text-white hover:text-yellow-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </a>
                <div>
                    <h1 class="text-2xl font-bold text-white">
                        {% if action == 'edit' %}‚úèÔ∏è Editar Campeonato{% else %}‚ûï Novo Campeonato{% endif %}
                    </h1>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700">
                <h2 class="text-lg font-bold text-white mb-4">Informa√ß√µes B√°sicas</h2>
                
                <!-- Name -->
                <div class="mb-4">
                    <label for="name" class="block text-gray-300 text-sm font-medium mb-2">
                        Nome do Campeonato *
                    </label>
                    <input type="text" name="name" id="name" required
                           value="{% if championship %}{{ championship.name }}{% endif %}"
                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"
                           placeholder="Ex: Campeonato Confian√ßa 2024">
                </div>

                <!-- Description -->
                <div class="mb-4">
                    <label for="description" class="block text-gray-300 text-sm font-medium mb-2">
                        Descri√ß√£o
                    </label>
                    <textarea name="description" id="description" rows="3"
                              class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"
                              placeholder="Descri√ß√£o do campeonato...">{% if championship %}{{ championship.description }}{% endif %}</textarea>
                </div>

                <!-- Google Sheet URL -->
                <div class="mb-4">
                    <label for="google_sheet_url" class="block text-gray-300 text-sm font-medium mb-2">
                        URL da Planilha Google (Tabela de Classifica√ß√£o)
                    </label>
                    <input type="url" name="google_sheet_url" id="google_sheet_url"
                           value="{% if championship %}{{ championship.google_sheet_url }}{% endif %}"
                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"
                           placeholder="https://docs.google.com/spreadsheets/d/.../pubhtml">
                    <p class="text-gray-500 text-xs mt-1">
                        Cole a URL de publica√ß√£o da planilha (Arquivo ‚Üí Publicar na web ‚Üí Link)
                    </p>
                </div>

                <!-- Banner -->
                <div class="mb-4">
                    <label for="banner" class="block text-gray-300 text-sm font-medium mb-2">
                        Banner
                    </label>
                    {% if championship and championship.banner %}
                    <div class="mb-3">
                        <img src="{{ championship.banner.url }}" alt="Banner atual" class="h-32 rounded-lg object-cover">
                        <p class="text-gray-500 text-xs mt-1">Banner atual</p>
                    </div>
                    {% endif %}
                    <input type="file" name="banner" id="banner" accept="image/*"
                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white file:cursor-pointer">
                </div>

                <!-- Status -->
                <div class="mb-4">
                    <label for="status" class="block text-gray-300 text-sm font-medium mb-2">
                        Status
                    </label>
                    <select name="status" id="status"
                            class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500">
                        <option value="draft" {% if championship and championship.status == 'draft' %}selected{% endif %}>
                            üìù Rascunho
                        </option>
                        <option value="active" {% if championship and championship.status == 'active' %}selected{% endif %}>
                            ‚úÖ Ativo
                        </option>
                        <option value="paused" {% if championship and championship.status == 'paused' %}selected{% endif %}>
                            ‚è∏Ô∏è Pausado
                        </option>
                        <option value="finished" {% if championship and championship.status == 'finished' %}selected{% endif %}>
                            üèÅ Finalizado
                        </option>
                    </select>
                </div>
            </div>

            <!-- Sectors Selection -->
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700">
                <h2 class="text-lg font-bold text-white mb-4">Times Participantes (Setores)</h2>
                <p class="text-gray-400 text-sm mb-4">Selecione os setores que participar√£o do campeonato:</p>
                
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                    {% for sector in sectors %}
                    <label class="flex items-center space-x-2 bg-gray-700/50 hover:bg-gray-700 p-3 rounded-lg cursor-pointer transition">
                        <input type="checkbox" name="sectors" value="{{ sector.id }}"
                               {% if championship and sector in championship.participating_sectors.all %}checked{% endif %}
                               class="w-4 h-4 text-purple-600 bg-gray-600 border-gray-500 rounded focus:ring-purple-500">
                        <span class="text-white text-sm">{{ sector.name }}</span>
                    </label>
                    {% empty %}
                    <p class="text-gray-500 col-span-full">Nenhum setor cadastrado.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="flex flex-col sm:flex-row justify-end gap-3">
                <a href="{% url 'betting:admin_dashboard' %}" 
                   class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg text-center transition">
                    Cancelar
                </a>
                <button type="submit" 
                        class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold px-6 py-3 rounded-lg transition">
                    {% if action == 'edit' %}üíæ Salvar Altera√ß√µes{% else %}‚úÖ Criar Campeonato{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
